# Robotics-ER 高度化 開発フロー (参照用)

常に参照する指示・タスクをここに集約します。完了したらチェックボックスを更新してください。

## タスク一覧
- [x] Vision/Plannerのプロンプト正規化
  - Vision: bboxは0–1000正規化、未検出は`[]`、JSON配列で返すようプロンプトを修正。
  - Planner: アクション選択JSONのフォーマットを明示。
- [ ] ERフォールバック (planner-assist)
  - Flashが決定できない/失敗したときにERに単一ステップを問い合わせるフェイルセーフ。
- [ ] 進捗・スタック検知
  - ERで`status/progress/comment`を推定し、低進捗が続けば自動再スキャン/再プラン。
- [ ] 逆投影補助
  - MuJoCoカメラ行列を使って正規化点/ボックスから床面上の粗い位置を推定し、方位・距離のヒントとして利用。
- [ ] ツールコール準備
  - scan/turn/move/approachをツールとして定義し、将来のERツールコールプランニングに対応できるインターフェース設計。
- [ ] パラメータ調整
  - キャリブレーション結果（離散ターン速度/時間）を反映し、シミュレーションで検証・チューニング。

## 参照メモ
- `specifications.md` に現行仕様とER高度利用方針を反映済み。変更時は本ファイルも併せて更新。
- Vision/Plannerのプロンプト指針: 0–1000正規化、未検出は空配列、JSON明示。
- 進捗推定の返却例: `{"status": "IN_PROGRESS"|"STALLED"|"COMPLETED", "progress": 0..1, "comment": "..."}`
